components:
  schemas:
    Plan:
      type: object
      required:
      - planid
      - title
      - period
      - perks
      properties:
        planid:
          type: string
        title:
          type: string
        # If not set, show "Contact us"
        pricing:
          type: object
          required:
          - basePrice
          - baseMau
          - unitMau
          - unitPrice
          - period
          properties:
            basePrice:
              type: integer
              format: int64
            baseMau:
              type: integer
              format: int64
            unitMau:
              type: integer
              format: int64
            unitPrice:
              type: integer
              format: int64
            period:
              type: string
              enum:
              - Monthly
              - Quarterly
              - Yearly
        perks:
          type: array
          items:
            title: PlanPerk
            type: object
            required:
            - desc
            properties:
              desc:
                type: string
              terms:
                type: string
        comingSoon:
          type: boolean
        beta:
          type: boolean
    FeaturesTable:
      type: object
      required:
      - plans
      - features
      properties:
        plans:
          type: array
          items:
            type: string
        features:
          type: array
          items:
            type: object
            required:
            - feature
            - values
            properties:
              feature:
                type: string
              values:
                type: array
                items:
                  type: string
              terms:
                type: string
        extraTerms:
          type: string
    AccountLogin:
      type: object
      required:
      - email
      - password
      properties:
        email:
          type: string
        password:
          type: string
    AccountLoginAs:
      type: object
      required:
      - email
      properties:
        email:
          type: string
    AccountSearchSuperAdmin:
      type: object
      properties:
        searchText:
          type: string
          description: Search by name and email.
    AccountSignupAdmin:
      type: object
      required:
      - name
      - email
      - password
      - planid
      properties:
        name:
          type: string
        email:
          type: string
        password:
          type: string
        planid:
          type: string
    Account:
      type: object
      required:
      - name
      - email
      properties:
        name:
          type: string
        email:
          type: string
    AccountAdmin:
      type: object
      required:
      - subscriptionStatus
      - plan
      - name
      - email
      - cfJwt
      - hasApiKey
      properties:
        plan:
          $ref: 'api-account.yaml#/components/schemas/Plan'
        subscriptionStatus:
          $ref: 'api-account.yaml#/components/schemas/SubscriptionStatus'
        name:
          type: string
        email:
          type: string
        cfJwt:
          type: string
        hasApiKey:
          type: boolean
        isSuperAdmin:
          type: boolean
    SubscriptionStatus:
      type: string
      enum:
      - Active
      - ActiveTrial
      - ActivePaymentRetry
      - ActiveNoRenewal
      - NoPaymentMethod
      - Blocked
      - Cancelled
    AccountUpdateAdmin:
      type: object
      properties:
        name:
          type: string
        email:
          type: string
        password:
          type: string
        apiKey:
          type: string
        renewAutomatically:
          type: boolean
        paymentToken:
          type: object
          required:
          - type
          - token
          properties:
            type:
              type: string
            token:
              type: string
        planid:
          type: string
        cancelEndOfTerm:
          type: boolean
        resume:
          type: boolean
    AccountBilling:
      type: object
      required:
      - subscriptionStatus
      - availablePlans
      - invoices
      - accountReceivable
      - accountPayable
      properties:
        subscriptionStatus:
          $ref: 'api-account.yaml#/components/schemas/SubscriptionStatus'
        payment:
          type: object
          required:
          - last4
          - expiryMonth
          - expiryYear
          properties:
            brand:
              type: string
            last4:
              type: string
            expiryMonth:
              type: integer
              format: int64
            expiryYear:
              type: integer
              format: int64
        billingPeriodEnd:
          type: string
          format: date-time
        billingPeriodMau:
          type: integer
          format: int64
        availablePlans:
          type: array
          items:
            $ref: 'api-account.yaml#/components/schemas/Plan'
        invoices:
          $ref: 'api-account.yaml#/components/schemas/Invoices'
        accountReceivable:
          type: integer
          format: int64
        accountPayable:
          type: integer
          format: int64
        endOfTermChangeToPlan:
          $ref: 'api-account.yaml#/components/schemas/Plan'
    Invoices:
      title: InvoicesSearchAdminResponse
      type: object
      required:
      - results
      properties:
        cursor:
          $ref: 'api-client.yaml#/components/schemas/Cursor'
        results:
          type: array
          items:
            title: InvoiceItem
            type: object
            required:
            - date
            - status
            - amount
            - invoiceNumber
            properties:
              date:
                type: string
                format: date
              status:
                type: string
              amount:
                type: number
                format: double
              description:
                type: string
              invoiceNumber:
                type: integer
                format: int64

/support/message:
  post:
    operationId: supportMessage
    tags: [Support]
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            title: SupportMessage
            required:
            - content
            properties:
              content:
                additionalProperties:
                  type: string
    responses:
      '200':
        $ref: 'api-client.yaml#/components/responses/Ok'
/admin/plan:
  get:
    operationId: plansGet
    tags: [Plan]
    parameters:
    responses:
      '200':
        content:
          application/json:
            schema:
              title: PlansGetResponse
              type: object
              required:
              - plans
              properties:
                plans:
                  type: array
                  items:
                    $ref: 'api-account.yaml#/components/schemas/Plan'
                featuresTable:
                  $ref: 'api-account.yaml#/components/schemas/FeaturesTable'
/admin/legal:
  get:
    operationId: legalGet
    tags: [AccountAdmin]
    responses:
      '200':
        content:
          application/json:
            schema:
              title: LegalResponse
              type: object
              required:
              - terms
              - privacy
              properties:
                terms:
                  type: string
                privacy:
                  type: string
/admin/account/signup:
  post:
    operationId: accountSignupAdmin
    tags: [AccountAdmin]
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: 'api-account.yaml#/components/schemas/AccountSignupAdmin'
    responses:
      '200':
        content:
          application/json:
            schema:
              $ref: 'api-account.yaml#/components/schemas/AccountAdmin'
/admin/account/bind:
  post:
    operationId: accountBindAdmin
    tags: [AccountAdmin]
    responses:
      '200':
        content:
          application/json:
            schema:
              title: AccountBindAdminResponse
              type: object
              required:
              - isSuperAdmin
              properties:
                account:
                  $ref: 'api-account.yaml#/components/schemas/AccountAdmin'
                isSuperAdmin:
                  type: boolean
      '404':
        $ref: 'api-client.yaml#/components/responses/NotFound'
/admin/account/login:
  post:
    operationId: accountLoginAdmin
    tags: [AccountAdmin]
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: 'api-account.yaml#/components/schemas/AccountLogin'
    responses:
      '200':
        content:
          application/json:
            schema:
              $ref: 'api-account.yaml#/components/schemas/AccountAdmin'
/superadmin/account/loginas:
  post:
    operationId: accountLoginAsSuperAdmin
    tags: [AccountSuperAdmin]
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: 'api-account.yaml#/components/schemas/AccountLoginAs'
    responses:
      '200':
        content:
          application/json:
            schema:
              $ref: 'api-account.yaml#/components/schemas/AccountAdmin'
/superadmin/accountsearch:
  post:
    operationId: accountSearchSuperAdmin
    tags: [AccountSuperAdmin]
    parameters:
    - name: cursor
      in: query
      schema:
        $ref: 'api-client.yaml#/components/schemas/Cursor'
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: 'api-account.yaml#/components/schemas/AccountSearchSuperAdmin'
    responses:
      '200':
        content:
          application/json:
            schema:
              title: AccountSearchResponse
              type: object
              required:
                - results
              properties:
                cursor:
                  $ref: 'api-client.yaml#/components/schemas/Cursor'
                results:
                  type: array
                  items:
                    $ref: 'api-account.yaml#/components/schemas/Account'
/admin/account/logout:
  post:
    operationId: accountLogoutAdmin
    tags: [AccountAdmin]
    responses:
      '200':
        $ref: 'api-client.yaml#/components/responses/Ok'
/admin/account/update:
  post:
    operationId: accountUpdateAdmin
    tags: [AccountAdmin]
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: 'api-account.yaml#/components/schemas/AccountUpdateAdmin'
    responses:
      '200':
        content:
          application/json:
            schema:
              $ref: 'api-account.yaml#/components/schemas/AccountAdmin'
/admin/account/billing:
  get:
    operationId: accountBillingAdmin
    tags: [AccountAdmin]
    responses:
      '200':
        content:
          application/json:
            schema:
              $ref: 'api-account.yaml#/components/schemas/AccountBilling'
/admin/account/billing/invoices:
  get:
    operationId: invoicesSearchAdmin
    tags: [AccountAdmin]
    parameters:
    - name: cursor
      in: query
      schema:
        $ref: 'api-client.yaml#/components/schemas/Cursor'
    responses:
      '200':
        content:
          application/json:
            schema:
              $ref: 'api-account.yaml#/components/schemas/Invoices'
/admin/account/billing/invoice/{invoiceNumber}:
  get:
    operationId: invoiceHtmlGetAdmin
    tags: [AccountAdmin]
    parameters:
    - name: invoiceNumber
      in: path
      required: true
      schema:
        type: integer
        format: int64
    responses:
      '200':
        content:
          application/json:
            schema:
              title: InvoiceHtmlResponse
              type: object
              required:
              - invoiceHtml
              properties:
                invoiceHtml:
                  type: string
/admin/account/delete:
  delete:
    operationId: accountDeleteAdmin
    tags: [AccountAdmin]
    responses:
      '200':
        $ref: 'api-client.yaml#/components/responses/Ok'
