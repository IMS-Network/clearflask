
components:
  schemas:
    IdeaSearch:
      type: object
      properties:
        searchKey:
          type: string
          description: >-
            Unique key describing this specific search query.
            Used for deduping requests, caching.
        sortBy:
          type: string
          enum: 
            - Trending
            - Top
            - New
        filterIdeaGroupIds:
          type: array
          items:
            type: string
        filterIdeaStatusIds:
          type: array
          items:
            type: string
        filterIdeaTagIds:
          type: array
          items:
            type: string
        searchText:
          type: string
        limit:
          description: >-
            Optionally set a limit on how many results to return.
            Between 10 and 50.
          type: integer
      required:
        - searchKey
        - sortBy
    IdeaSearchAdmin:
      allOf:
        - $ref: 'api-idea.yaml#/components/schemas/IdeaSearch'
        - type: object
          properties:
            filterCreatedStart:
              type: string
              format: date-time
            filterCreatedEnd:
              type: string
              format: date-time
            filterLastActivityStart:
              type: string
              format: date-time
            filterLastActivityEnd:
              type: string
              format: date-time
          required:
    IdeaRead:
      type: object
      properties:
        ideaId:
          type: string
        authorUserId:
          type: string
        created:
          type: string
          format: date-time
        title:
          type: string
        description:
          type: string
        groupId:
          type: string
        statusId:
          type: string
        tagIds:
          type: array
          items:
            type: string
        creditGoal:
          type: number
        funderCount:
          type: integer
        supporterCount:
          type: integer
      required:
        - ideaId
        - authorUserId
        - created
        - title
        - description
        - groupId
        - tagIds
    IdeaReadAdmin:
      allOf:
        - $ref: 'api-idea.yaml#/components/schemas/IdeaRead'
        - type: object
          properties:
          required:
    IdeaCreate:
      type: object
      properties:
        authorUserId:
          type: string
        title:
          type: string
        description:
          type: string
        groupId:
          type: string
        tagIds:
          type: array
          items:
            type: string
      required:
        - authorUserId
        - title
        - groupId
        - tagIds
    IdeaCreateAdmin:
      allOf:
        - $ref: 'api-idea.yaml#/components/schemas/IdeaCreate'
        - type: object
          properties:
            created:
              type: string
              format: date-time
            statusId:
              type: string
            creditGoal:
              type: number
          required:
    IdeaUpdate:
      type: object
      properties:
        description:
          type: string
        tagIds:
          type: array
          items:
            type: string
    IdeaUpdateAdmin:
      allOf:
        - $ref: 'api-idea.yaml#/components/schemas/IdeaCreate'
        - type: object
          properties:
            title:
              type: string
            groupId:
              type: string
            tagIds:
              type: array
              items:
                type: string
            creditGoal:
              type: number

/project/{projectId}/idea:
  get:
    operationId: ideaSearch
    tags: [Idea]
    parameters:
      - name: projectId
        in: path
        required: true
        schema:
          type: string
      - name: cursor
        in: query
        schema:
          $ref: 'api-client.yaml#/components/schemas/Cursor'
      - name: search
        in: query
        required: true
        schema:
          $ref: 'api-idea.yaml#/components/schemas/IdeaSearch'
    responses:
      '200':
        content:
          application/json:
            schema:
              title: IdeaSearchResponse
              type: object
              properties:
                cursor:
                  $ref: 'api-client.yaml#/components/schemas/Cursor'
                results:
                  type: array
                  items:
                    $ref: 'api-idea.yaml#/components/schemas/IdeaRead'
              required:
                - results
  post:
    operationId: ideaCreate
    tags: [Idea]
    parameters:
      - name: projectId
        in: path
        required: true
        schema:
          type: string
      - name: create
        in: query
        required: true
        schema:
          $ref: 'api-idea.yaml#/components/schemas/IdeaUpdate'
    responses:
      '200':
        content:
          application/json:
            schema:
              $ref: 'api-idea.yaml#/components/schemas/IdeaRead'
/project/{projectId}/idea/{ideaId}:
  get:
    operationId: ideaGet
    tags: [Idea]
    parameters:
      - name: projectId
        in: path
        required: true
        schema:
          type: string
      - name: ideaId
        in: path
        required: true
        schema:
          type: string
    responses:
      '200':
        content:
          application/json:
            schema:
              $ref: 'api-idea.yaml#/components/schemas/IdeaRead'
      '404':
        $ref: 'api-client.yaml#/components/responses/NotFound'
  patch:
    operationId: ideaUpdate
    tags: [Idea]
    parameters:
      - name: projectId
        in: path
        required: true
        schema:
          type: string
      - name: ideaId
        in: path
        required: true
        schema:
          type: string
      - name: update
        in: query
        required: true
        schema:
          $ref: 'api-idea.yaml#/components/schemas/IdeaUpdate'
    responses:
      '200':
        content:
          application/json:
            schema:
              $ref: 'api-idea.yaml#/components/schemas/IdeaRead'
      '404':
        $ref: 'api-client.yaml#/components/responses/NotFound'
  delete:
    operationId: ideaDelete
    tags: [Idea]
    parameters:
      - name: projectId
        in: path
        required: true
        schema:
          type: string
      - name: ideaId
        in: path
        required: true
        schema:
          type: string
    responses:
      '200':
        $ref: 'api-client.yaml#/components/responses/Ok'
      '404':
        $ref: 'api-client.yaml#/components/responses/NotFound'
/project/{projectId}/admin/idea:
  get:
    operationId: ideaSearchAdmin
    tags: [IdeaAdmin]
    parameters:
      - name: projectId
        in: path
        required: true
        schema:
          type: string
      - name: cursor
        in: query
        schema:
          $ref: 'api-client.yaml#/components/schemas/Cursor'
      - name: search
        in: query
        required: true
        schema:
          $ref: 'api-idea.yaml#/components/schemas/IdeaSearchAdmin'
    responses:
      '200':
        content:
          application/json:
            schema:
              title: IdeaSearchResponse
              type: object
              properties:
                cursor:
                  $ref: 'api-client.yaml#/components/schemas/Cursor'
                results:
                  type: array
                  items:
                    $ref: 'api-idea.yaml#/components/schemas/IdeaReadAdmin'
              required:
                - results
  post:
    operationId: ideaCreateAdmin
    tags: [IdeaAdmin]
    parameters:
      - name: projectId
        in: path
        required: true
        schema:
          type: string
      - name: idea
        in: query
        required: true
        schema:
          $ref: 'api-idea.yaml#/components/schemas/IdeaCreateAdmin'
    responses:
      '200':
        content:
          application/json:
            schema:
              $ref: 'api-idea.yaml#/components/schemas/IdeaReadAdmin'
  delete:
    operationId: ideaDeleteBulkAdmin
    tags: [IdeaAdmin]
    parameters:
      - name: projectId
        in: path
        required: true
        schema:
          type: string
      - name: search
        in: query
        required: true
        schema:
          $ref: 'api-idea.yaml#/components/schemas/IdeaSearchAdmin'
    responses:
      '200':
        $ref: 'api-client.yaml#/components/responses/Ok'
      '404':
        $ref: 'api-client.yaml#/components/responses/NotFound'
/project/{projectId}/admin/idea/{ideaId}:
  get:
    operationId: ideaGetAdmin
    tags: [IdeaAdmin]
    parameters:
      - name: projectId
        in: path
        required: true
        schema:
          type: string
      - name: ideaId
        in: path
        required: true
        schema:
          type: string
    responses:
      '200':
        content:
          application/json:
            schema:
              $ref: 'api-idea.yaml#/components/schemas/IdeaReadAdmin'
      '404':
        $ref: 'api-client.yaml#/components/responses/NotFound'
  patch:
    operationId: ideaUpdateAdmin
    tags: [IdeaAdmin]
    parameters:
      - name: projectId
        in: path
        required: true
        schema:
          type: string
      - name: ideaId
        in: path
        required: true
        schema:
          type: string
      - name: update
        in: query
        required: true
        schema:
          $ref: 'api-idea.yaml#/components/schemas/IdeaUpdateAdmin'
    responses:
      '200':
        content:
          application/json:
            schema:
              $ref: 'api-idea.yaml#/components/schemas/IdeaReadAdmin'
      '404':
        $ref: 'api-client.yaml#/components/responses/NotFound'
  delete:
    operationId: ideaDeleteAdmin
    tags: [IdeaAdmin]
    parameters:
      - name: projectId
        in: path
        required: true
        schema:
          type: string
      - name: ideaId
        in: path
        required: true
        schema:
          type: string
    responses:
      '200':
        $ref: 'api-client.yaml#/components/responses/Ok'
      '404':
        $ref: 'api-client.yaml#/components/responses/NotFound'
