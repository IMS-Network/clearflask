components:
  schemas:
    Plan:
      type: object
      required:
      - planid
      - title
      - period
      - perks
      properties:
        planid:
          type: string
        title:
          type: string
        # If not set, show "Contact us"
        pricing:
          type: object
          required:
          - price
          - period
          properties:
            price:
              type: integer
              format: int64
            period:
              type: string
              enum:
              - Monthly
              - Quarterly
              - Yearly
        perks:
          type: array
          items:
            title: PlanPerk
            type: object
            required:
            - desc
            properties:
              desc:
                type: string
              terms:
                type: string
        comingSoon:
          type: boolean
        beta:
          type: boolean
    FeaturesTable:
      type: object
      required:
      - plans
      - features
      properties:
        plans:
          type: array
          items:
            type: string
        features:
          type: array
          items:
            type: object
            required:
            - feature
            - values
            properties:
              feature:
                type: string
              values:
                type: array
                items:
                  type: string
              terms:
                type: string
        extraTerms:
          type: string
    AccountLogin:
      type: object
      required:
      - email
      - password
      properties:
        email:
          type: string
        password:
          type: string
    AccountSignupAdmin:
      type: object
      required:
      - name
      - email
      - password
      - planid
      properties:
        name:
          type: string
        email:
          type: string
        password:
          type: string
        planid:
          type: string
    AccountAdmin:
      type: object
      required:
      - subscriptionStatus
      - plan
      - name
      - email
      - cfJwt
      properties:
        plan:
          $ref: 'api-account.yaml#/components/schemas/Plan'
        subscriptionStatus:
          type: string
          enum:
          - Active
          - ActiveTrial
          - ActivePaymentRetry
          - ActiveNoRenewal
          - TrialExpired
          - PaymentFailed
          - Cancelled
        name:
          type: string
        email:
          type: string
        cfJwt:
          type: string
    AccountUpdateAdmin:
      type: object
      properties:
        name:
          type: string
        email:
          type: string
        password:
          type: string
        renewAutomatically:
          type: boolean
        paymentToken:
          type: string
        planid:
          type: string
        subscriptionActive:
          type: boolean
    AccountBilling:
      type: object
      required:
      - availablePlans
      - billingHistory
      properties:
        payment:
          type: object
          required:
          - last4
          - expiryMonth
          - expiryYear
          properties:
            brand:
              type: string
            last4:
              type: string
            expiryMonth:
              type: integer
              format: int64
            expiryYear:
              type: integer
              format: int64
        billingPeriodEnd:
          type: string
          format: date-time
        availablePlans:
          type: array
          items:
            $ref: 'api-account.yaml#/components/schemas/Plan'
        billingHistory:
          $ref: 'api-account.yaml#/components/schemas/BillingHistory'
    BillingHistory:
      title: BillingHistorySearchAdminResponse
      type: object
      required:
      - results
      properties:
        cursor:
          $ref: 'api-client.yaml#/components/schemas/Cursor'
        results:
          type: array
          items:
            title: BillingHistoryItem
            type: object
            required:
            - date
            - amount
            - invoiceUrl
            properties:
              date:
                type: string
                format: date-time
              amount:
                type: string
              description:
                type: string
              invoiceUrl:
                type: string

/support/message:
  post:
    operationId: supportMessage
    tags: [Support]
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            title: SupportMessage
            required:
            - content
            properties:
              content:
                additionalProperties:
                  type: string
    responses:
      '200':
        $ref: 'api-client.yaml#/components/responses/Ok'
/admin/plan:
  get:
    operationId: plansGet
    tags: [Plan]
    parameters:
    responses:
      '200':
        content:
          application/json:
            schema:
              title: PlansGetResponse
              type: object
              required:
              - plans
              - featuresTable
              properties:
                plans:
                  type: array
                  items:
                    $ref: 'api-account.yaml#/components/schemas/Plan'
                featuresTable:
                  $ref: 'api-account.yaml#/components/schemas/FeaturesTable'
/admin/legal:
  get:
    operationId: legalGet
    tags: [AccountAdmin]
    responses:
      '200':
        content:
          application/json:
            schema:
              title: LegalResponse
              type: object
              required:
              - terms
              - privacy
              properties:
                terms:
                  type: string
                privacy:
                  type: string
/admin/account/signup:
  post:
    operationId: accountSignupAdmin
    tags: [AccountAdmin]
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: 'api-account.yaml#/components/schemas/AccountSignupAdmin'
    responses:
      '200':
        content:
          application/json:
            schema:
              $ref: 'api-account.yaml#/components/schemas/AccountAdmin'
/admin/account/bind:
  post:
    operationId: accountBindAdmin
    tags: [AccountAdmin]
    responses:
      '200':
        content:
          application/json:
            schema:
              title: AccountBindAdminResponse
              type: object
              properties:
                account:
                  $ref: 'api-account.yaml#/components/schemas/AccountAdmin'
      '404':
        $ref: 'api-client.yaml#/components/responses/NotFound'
/admin/account/login:
  post:
    operationId: accountLoginAdmin
    tags: [AccountAdmin]
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: 'api-account.yaml#/components/schemas/AccountLogin'
    responses:
      '200':
        content:
          application/json:
            schema:
              $ref: 'api-account.yaml#/components/schemas/AccountAdmin'
/admin/account/logout:
  post:
    operationId: accountLogoutAdmin
    tags: [AccountAdmin]
    responses:
      '200':
        $ref: 'api-client.yaml#/components/responses/Ok'
/admin/account/update:
  post:
    operationId: accountUpdateAdmin
    tags: [AccountAdmin]
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: 'api-account.yaml#/components/schemas/AccountUpdateAdmin'
    responses:
      '200':
        content:
          application/json:
            schema:
              $ref: 'api-account.yaml#/components/schemas/AccountAdmin'
/admin/account/billing:
  get:
    operationId: accountBillingAdmin
    tags: [AccountAdmin]
    responses:
      '200':
        content:
          application/json:
            schema:
              $ref: 'api-account.yaml#/components/schemas/AccountBilling'
/admin/account/billing/history:
  get:
    operationId: billingHistorySearchAdmin
    tags: [AccountAdmin]
    parameters:
    - name: cursor
      in: query
      schema:
        $ref: 'api-client.yaml#/components/schemas/Cursor'
    responses:
      '200':
        content:
          application/json:
            schema:
              $ref: 'api-account.yaml#/components/schemas/BillingHistory'
